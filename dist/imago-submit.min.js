var imagoSubmit,__indexOf=[].indexOf||function(t){for(var n=0,e=this.length;e>n;n++)if(n in this&&this[n]===t)return n;return-1};imagoSubmit=function(){function t(t,n){return{getxsrf:function(){var n;return n="online"===data&&debug?"http://"+tenant+".imagoapp.com/api/v2/getxsrf":"/api/v2/getxsrf",t.get(n)},formToJson:function(t){var e,r,o,i,a;e=["message","subscribe"],i={},o="";for(r in t)a=t[r],__indexOf.call(e,r)<0&&(o+=""+n.titleCase(r)+": "+a+"<br><br>"),i[r]=a||"";return i.message=o+n.replaceNewLines(i.message||""),angular.toJson(i)},send:function(n){return this.getxsrf().then(function(e){return function(r){var o,i;return console.log("getxsrf success: ",r),i={"Nex-Xsrf":r.data},o="online"===n&&debug?"http://"+tenant+".imagoapp.com/api/v2/contact":"/api/v2/contact",t.post(o,e.formToJson(n),{headers:i}).then(function(t){return console.log("success: ",t),!0},function(t){return console.log("error: ",t),!1})}}(this),function(t){return console.log("getxsrf error: ",t)})}}}return t}(),angular.module("imago").factory("imagoSubmit",["$http","imagoUtils",imagoSubmit]);
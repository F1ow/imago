var imagoSlider,imagoSliderController;imagoSlider=function(){function e(e,n,r,t){return{transclude:!0,scope:!0,templateUrl:"/imago/imagoSlider.html",controller:"imagoSliderController as imagoslider",bindToController:{assets:"=imagoSlider",length:"@?"},link:function(o,i,a,l,c){var s,d,u,g,m;u=i.children(),c(o,function(e,n){return u.append(e)});for(s in a)g=a[s],"$"!==s.charAt(0)&&(("true"===g||"false"===g)&&(g=JSON.parse(g)),o.imagoslider.conf[s]=g);return m=o.$watch("assets",function(e){return e&&_.isArray(e)?(o.imagoslider.length=e.length,console.log("data",e)):void 0}),o.imagoslider.conf.siblings=!(!o.imagoslider.conf.next||!o.imagoslider.conf.prev),o.currentIndex=t.path().indexOf("last")?parseInt(o.imagoslider.conf.current):o.getLast(),o.clearInterval=function(){return o.imagoslider.conf.interval?r.cancel(o.imagoslider.conf.interval):void 0},o.goPrev=function(e){return"object"==typeof e&&(o.clearInterval(),e.stopPropagation()),o.imagoslider.conf.loop?o.imagoslider.conf.loop&&!o.imagoslider.conf.siblings?o.setCurrent(o.currentIndex>0?o.currentIndex-1:parseInt(o.imagoslider.length)-1):o.imagoslider.conf.loop&&o.imagoslider.conf.siblings?o.currentIndex>0?o.setCurrent(o.currentIndex-1):t.path(o.imagoslider.conf.prev):void 0:o.setCurrent(o.currentIndex>0?o.currentIndex-1:o.currentIndex)},o.goNext=function(e){return"object"==typeof e&&(o.clearInterval(),e.stopPropagation()),o.imagoslider.conf.loop?o.imagoslider.conf.loop&&!o.imagoslider.conf.siblings?o.setCurrent(o.currentIndex<parseInt(o.imagoslider.length)-1?o.currentIndex+1:0):o.imagoslider.conf.loop&&o.imagoslider.conf.siblings?o.currentIndex<parseInt(o.imagoslider.length)-1?o.setCurrent(o.currentIndex+1):t.path(o.imagoslider.conf.next):void 0:o.setCurrent(o.currentIndex<parseInt(o.imagoslider.length)-1?o.currentIndex+1:o.currentIndex)},o.getLast=function(){return parseInt(o.imagoslider.length)-1},o.getCurrent=function(){return o.currentIndex},o.setCurrent=function(n){return function(n){return o.action=function(){switch(!1){case!(0===n&&o.currentIndex===parseInt(o.imagoslider.length)-1&&!o.imagoslider.conf.siblings):return"next";case!(n===parseInt(o.imagoslider.length)-1&&0===o.currentIndex&&!o.imagoslider.conf.siblings):return"prev";case!(n>o.currentIndex):return"next";case!(n<o.currentIndex):return"prev";default:return""}}(),o.currentIndex=n,e.$emit(o.imagoslider.conf.namespace+":changed",n)}}(this),_.isUndefined(a.autoplay)||o.$watch(a.autoplay,function(e){return function(e){return parseInt(e)>0?o.imagoslider.conf.interval=r(o.goNext,parseInt(e)):o.clearInterval()}}(this)),d=function(e){switch(e.keyCode){case 37:return o.$apply(function(){return o.goPrev()});case 39:return o.$apply(function(){return o.goNext()})}},o.imagoslider.conf.enablekeys&&n.on("keydown",d),m=e.$on(o.imagoslider.conf.namespace+":change",function(e,n){return o.clearInterval(),o.setCurrent(n)}),o.$on("$destroy",function(){return n.off("keydown",d),o.clearInterval(),m()})}}}return e}(),imagoSliderController=function(){function e(){this.conf={animation:"fade",enablekeys:!0,enablearrows:!0,loop:!0,current:0,namespace:"slider",autoplay:0,next:null,prev:null}}return e}(),angular.module("imago").directive("imagoSlider",["$rootScope","$document","$interval","$location",imagoSlider]).controller("imagoSliderController",[imagoSliderController]),angular.module("imago").run(["$templateCache",function(e){e.put("/imago/imagoSlider.html",'<div ng-class="[conf.animation, action]" ng-swipe-left="goNext($event)" ng-swipe-right="goPrev($event)" class="imagoslider"><div ng-show="conf.enablearrows" ng-click="goPrev($event)" analytics-on="click" analytics-event="Previous Slide" class="prev"></div><div ng-show="conf.enablearrows" ng-click="goNext($event)" analytics-on="click" analytics-event="Next Slide" class="next"></div></div>')}]);
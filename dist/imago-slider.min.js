var imagoSlider,imagoSliderController;imagoSlider=function(){function e(e,n,r,t){return{transclude:!0,scope:!0,templateUrl:"/imago/imagoSlider.html",controller:"imagoSliderController as imagoslider",bindToController:{assets:"=?imagoSlider"},link:function(i,o,a,l,s){var c,d,g,u,m,f;u=o.children(),i.imagoslider.length=a.length||(null!=(g=i.imagoslider.assets)?g.length:void 0),s(i,function(e,n){return u.append(e)});for(c in a)m=a[c],"$"!==c.charAt(0)&&(("true"===m||"false"===m)&&(m=JSON.parse(m)),i.imagoslider.conf[c]=m);return f=[],f.push(angular.isDefined(a.length)?a.$observe("length",function(e){return i.imagoslider.length=e}):i.$watch("assets",function(e){return console.log("data",e),e&&_.isArray(e)?i.imagoslider.length=e.length:void 0})),i.imagoslider.conf.siblings=!(!i.imagoslider.conf.next||!i.imagoslider.conf.prev),i.currentIndex=t.path().indexOf("last")?parseInt(i.imagoslider.conf.current):i.getLast(),i.clearInterval=function(){return i.imagoslider.conf.interval?r.cancel(i.imagoslider.conf.interval):void 0},i.goPrev=function(e){return"object"==typeof e&&(i.clearInterval(),e.stopPropagation()),i.imagoslider.conf.loop?i.imagoslider.conf.loop&&!i.imagoslider.conf.siblings?i.setCurrent(i.currentIndex>0?i.currentIndex-1:parseInt(i.imagoslider.length)-1):i.imagoslider.conf.loop&&i.imagoslider.conf.siblings?i.currentIndex>0?i.setCurrent(i.currentIndex-1):t.path(i.imagoslider.conf.prev):void 0:i.setCurrent(i.currentIndex>0?i.currentIndex-1:i.currentIndex)},i.goNext=function(e){return function(e){return"object"==typeof e&&(i.clearInterval(),e.stopPropagation()),i.imagoslider.conf.loop?i.imagoslider.conf.loop&&!i.imagoslider.conf.siblings?i.setCurrent(i.currentIndex<parseInt(i.imagoslider.length)-1?i.currentIndex+1:0):i.imagoslider.conf.loop&&i.imagoslider.conf.siblings?i.currentIndex<parseInt(i.imagoslider.length)-1?i.setCurrent(i.currentIndex+1):t.path(i.imagoslider.conf.next):void 0:i.setCurrent(i.currentIndex<parseInt(i.imagoslider.length)-1?i.currentIndex+1:i.currentIndex)}}(this),i.getLast=function(){return parseInt(i.imagoslider.length)-1},i.getCurrent=function(){return i.currentIndex},i.setCurrent=function(n){return function(n){return i.action=function(){switch(!1){case!(0===n&&i.currentIndex===parseInt(i.imagoslider.length)-1&&!i.imagoslider.conf.siblings):return"next";case!(n===parseInt(i.imagoslider.length)-1&&0===i.currentIndex&&!i.imagoslider.conf.siblings):return"prev";case!(n>i.currentIndex):return"next";case!(n<i.currentIndex):return"prev";default:return""}}(),i.currentIndex=n,e.$emit(i.imagoslider.conf.namespace+":changed",n)}}(this),_.isUndefined(a.autoplay)||i.$watch(a.autoplay,function(e){return function(e){return parseInt(e)>0?i.imagoslider.conf.interval=r(i.goNext,parseInt(e)):i.clearInterval()}}(this)),d=function(e){switch(e.keyCode){case 37:return i.$apply(function(){return i.goPrev()});case 39:return i.$apply(function(){return i.goNext()})}},i.imagoslider.conf.enablekeys&&n.on("keydown",d),f.push(e.$on(i.imagoslider.conf.namespace+":change",function(e,n){return i.clearInterval(),i.setCurrent(n)})),i.$on("$destroy",function(){var e,r,t,o;for(n.off("keydown",d),i.clearInterval(),t=[],e=0,r=f.length;r>e;e++)o=f[e],t.push(o());return t})}}}return e}(),imagoSliderController=function(){function e(){this.conf={animation:"fade",enablekeys:!0,enablearrows:!0,loop:!0,current:0,namespace:"slider",autoplay:0,next:null,prev:null}}return e}(),angular.module("imago").directive("imagoSlider",["$rootScope","$document","$interval","$location",imagoSlider]).controller("imagoSliderController",[imagoSliderController]),angular.module("imago").run(["$templateCache",function(e){e.put("/imago/imagoSlider.html",'<div ng-class="[imagoslider.conf.animation, action]" ng-swipe-left="goNext($event)" ng-swipe-right="goPrev($event)" class="imagoslider"><div ng-show="imagoslider.conf.enablearrows" ng-click="goPrev($event)" analytics-on="click" analytics-event="Previous Slide" class="prev"></div><div ng-show="imagoslider.conf.enablearrows" ng-click="goNext($event)" analytics-on="click" analytics-event="Next Slide" class="next"></div></div>')}]);
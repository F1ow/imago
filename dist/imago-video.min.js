var imagoControls;imagoControls=function(){function e(){return{replace:!0,scope:!0,require:"^imagoVideo",templateUrl:"/controlsVideo.html",controller:function(e){var t;return t=angular.element(e.player),e.currentTime=0,t.bind("loadeddata",function(t){return e.duration=parseInt(t.target.duration),e.$apply()}),t.bind("timeupdate",function(t){return e.currentTime=t.target.currentTime,e.$apply()}),t.bind("seeking",function(t){return e.currentTime=t.target.currentTime,e.$apply()})},link:function(e,t){return e.seek=function(t){return e.player.currentTime=t},e.onVolumeChange=function(){return function(t){return e.player.volume=parseFloat(t/100)}}(this),e.volumeDown=function(){return function(){return e.player.volume=0,e.volumeInput=0}}(this),e.volumeUp=function(){return function(){return e.player.volume=1,e.volumeInput=100}}(this),e.fullScreen=function(){return function(){return e.player.requestFullscreen?e.player.requestFullscreen():e.player.webkitRequestFullscreen?e.player.webkitRequestFullscreen():e.player.mozRequestFullScreen?e.player.mozRequestFullScreen():e.player.msRequestFullscreen?e.player.msRequestFullscreen():void 0}}(this),t.bind("mouseup",function(e){return e.stopPropagation()}),t.bind("mousedown",function(e){return e.stopPropagation()})}}}return e}(),angular.module("imago").directive("imagoControls",[imagoControls]);var imagoVideo;imagoVideo=function(){function e(e,t,i,n){return{scope:!0,templateUrl:"/imagoVideo.html",controller:function(e,t){return e.player=t.find("video")[0],e.loading=!0,angular.element(e.player).bind("ended",function(){return e.player.currentTime=0,e.isPlaying=!1}),angular.element(e.player).bind("loadeddata",function(){return e.hasPlayed=!0,angular.element(e.player).unbind("loadeddata")}),angular.element(e.player).bind("play",function(){return e.isPlaying=!0})},link:function(e,i,a){var r,o,l,s,u,c,p,d,m,g,f,h;d={visible:!1},u={autobuffer:null,autoplay:!1,controls:!0,preload:"none",size:"hd",align:"center center",sizemode:"fit",lazy:!0,hires:!0,loop:!1,width:"",height:""};for(o in a)h=a[o],u[o]="true"===h||"false"===h?JSON.parse(h):"width"===o||"height"===o?"auto"===h?h:parseInt(h):h;return d.watch=e.$watch(a.imagoVideo,function(){return function(e){var t;if(e)return a.watch||d.watch(),d.source=e,(null!=(t=d.source)?t.serving_url:void 0)?(d.source.fields.hasOwnProperty("crop")&&!a.align&&(u.align=d.source.fields.crop.value),d.source.fields.hasOwnProperty("sizemode")&&!a.sizemode&&(u.sizemode=d.source.fields.sizemode.value),c(d.source)):void i.remove()}}(this)),c=function(t){var n,a,r,o,s,c,g;return angular.isString(t.resolution)&&(r=t.resolution.split("x"),o={width:r[0],height:r[1]},u.assetRatio=r[0]/r[1]),e.controls=u.controls,u.width&&u.height?(g=u.width,a=u.height):(g=i[0].clientWidth,a=i[0].clientHeight),n=u.hires?Math.ceil(window.devicePixelRatio)||1:1,s=""+t.serving_url+"=s"+(Math.ceil(Math.min(Math.max(g,a)*n))||1600),c={size:u.size,sizemode:u.sizemode,backgroundPosition:u.align,backgroundImage:"url("+s+")",backgroundRepeat:"no-repeat"},e.wrapperStyle=c,m(),e.videoFormats=l(d.source),p(g,a,s)},m=function(){return u.autoplay===!0&&e.player.setAttribute("autoplay",!0),e.player.setAttribute("preload",u.preload),e.player.setAttribute("x-webkit-airplay","allow"),e.player.setAttribute("webkitAllowFullscreen",!0),e.player.setAttribute("loop",u.loop)},p=function(){return function(t,i,n){var r;return u.lazy&&!d.visible?d.visibleFunc=e.$watch(a.visible,function(e){return e?(d.visible=!0,d.visibleFunc(),p(t,i,n)):void 0}):(r=angular.element("<img>"),r.on("load",function(){return _.assign(e.wrapperStyle,f(t,i)),e.videoStyle=g(t,i),e.loading=!1,e.$apply()}),r[0].src=n)}}(this),f=function(e,t){var i,n;if(e&&t)return i={},n=e/t,"crop"===u.sizemode?i.backgroundSize=u.assetRatio<n?"100% auto":"auto 100%":u.assetRatio<n?(i.width=""+Math.round(t*u.assetRatio)+"px",i.height=""+t+"px",i.backgroundSize="auto 100%"):(i.width=""+e+"px",i.height=""+Math.round(e/u.assetRatio)+"px",i.backgroundSize="100% auto"),i},g=function(){return function(e,t){var i,a;if(e&&t)return i={},a=e/t,n.isiOS()?(i.width="100%",i.height="100%","center center"===u.align&&"crop"===u.sizemode&&(i.top="0",i.left="0")):"crop"===u.sizemode?u.assetRatio<a?(i.width="100%",i.height="auto","center center"===u.align&&(i.top="50%",i.left="auto",i.marginTop="-"+Math.round(t/2)+"px",i.marginLeft="0px")):(i.width="auto",i.height="100%","center center"===u.align&&(i.top="auto",i.left="50%",i.marginTop="0px",i.marginLeft="-"+Math.round(e/2)+"px")):u.assetRatio<a?(i.width="auto",i.height="100%"):(i.width="100%",i.height="auto"),i}}(this),l=function(e){var t,i,n,a,o,l,s;for(n=[],t=r(),e.fields.formats.sort(function(e,t){return t.height-e.height}),s=e.fields.formats,a=o=0,l=s.length;l>o;a=++o)i=s[a],t===i.codec&&n.push({src:"//api.2.imagoapp.com/api/play_redirect?uuid="+e.uuid+"&codec="+i.codec+"&quality=hd&max_size="+i.size,size:i.size,codec:i.codec,type:"video/"+t});return n},r=function(){var t;if(e.player.canPlayType){t={mp4:'video/mp4; codecs="mp4v.20.8"',mp4:'video/mp4; codecs="avc1.42E01E"',mp4:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',webm:'video/webm; codecs="vp8, vorbis"',ogg:'video/ogg; codecs="theora"'};for(o in t)if(h=t[o],e.player.canPlayType(h))return o}},e.togglePlay=function(){return function(){return e.player.paused?e.player.play():(e.isPlaying=!1,e.player.pause())}}(this),e.toggleSize=function(){return"hd"===u.size?(u.size="sd",e.wrapperStyle.size="sd"):(u.size="hd",e.wrapperStyle.size="hd"),e.videoFormats.reverse(),t(function(){return e.player.load(),e.player.play()})},s=function(){var t,n;return n=i[0].clientWidth||u.width,t=i[0].clientHeight||u.height,_.assign(e.wrapperStyle,f(n,t)),e.videoStyle=g(n,t),e.$apply()},e.$on("resize",s),e.$on("resizestop",function(){return c(d.source)})}}}return e}(),angular.module("imago").directive("imagoVideo",["$q","$timeout","$window","imagoUtils",imagoVideo]);var Time;Time=function(){function e(){return function(e){var t,i,n,a,r;if("number"==typeof e)return a=function(e){return 10>e?"0"+e:e},t=[],n=Math.floor(e/60),i=Math.floor(e/3600),r=0===e?0:e%60,r=Math.round(r),i>0&&t.push(a(i)),t.push(a(n)),t.push(a(r)),t.join(":")}}return e}(),angular.module("imago").filter("time",[Time]),angular.module("imago").run(["$templateCache",function(e){e.put("contact-widget.html",'<div class="nex form"><form name="nexContact" ng-submit="submitForm(nexContact.$valid)" novalidate="novalidate"><div class="nex field"><label for="name">Name</label><input type="text" name="name" ng-model="contact.name" placeholder="Name" require="require"/></div><div class="nex field"><label for="email">Email</label><input type="email" name="email" ng-model="contact.email" placeholder="Email" require="require"/></div><div class="nex field"><label for="message">Message</label><textarea name="message" ng-model="contact.message" placeholder="Your message." require="require"></textarea></div><div class="nex checkbox"><input type="checkbox" name="subscribe" ng-model="contact.subscribe" checked="checked"/><label for="subscribe">Subscribe</label></div><div class="formcontrols"><button type="submit" ng-disabled="nexContact.$invalid" class="send">Send</button></div></form><div class="sucess"><span>Thank You!</span></div><div class="error"><span>Error!</span></div></div>'),e.put("controlsVideo.html",'<div stop-propagation="stop-propagation" ng-switch="isPlaying" class="controls"><a ng-click="togglePlay()" ng-switch-when="false" class="video-play fa fa-play"></a><a ng-click="togglePlay()" ng-switch-when="true" class="video-pause fa fa-pause"></a><span class="video-time">{{currentTime | time}}</span><span class="video-seekbar"><input type="range" ng-model="currentTime" min="0" max="{{duration}}" ng-change="seek(currentTime)" class="seek"/></span><a ng-click="toggleSize()" class="size">{{wrapperStyle.size}}</a><span class="volume"><span ng-click="volumeUp()" class="fa fa-volume-up icon-volume-up"></span><input type="range" ng-model="volumeInput" ng-change="onVolumeChange(volumeInput)"/><span ng-click="volumeDown()" class="fa fa-volume-down icon-volume-down"></span></span><a ng-click="fullScreen()" class="video-fullscreen fa fa-expand"></a><a class="video-screen fa fa-compress"></a></div>'),e.put("imagoVideo.html",'<div ng-class="{loading: loading}" in-view="visible = $inview" visible="visible" responsive-events="responsive-events" class="imagovideo {{wrapperStyle.backgroundPosition}} {{wrapperStyle.size}} {{wrapperStyle.sizemode}}"><div ng-style="wrapperStyle" ng-class="{playing: isPlaying}" class="imagowrapper"><a ng-hide="loading" ng-click="togglePlay()" ng-class="{playing: isPlaying}" stop-propagation="stop-propagation" class="playbig fa fa-play"></a><video ng-style="videoStyle"><source ng-repeat="format in videoFormats" src="{{format.src}}" data-size="{{format.size}}" data-codec="{{format.codec}}" type="{{format.type}}"/></video><div imago-controls="imago-controls" ng-style="controlStyle" ng-if="controls" ng-show="hasPlayed"></div></div></div>')}]);